<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="RPG520">
<title>Appendix • RPG520</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Appendix">
<meta property="og:description" content="RPG520">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">RPG520</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9013</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/day_1.html">Day 1: Introduction to the CCR, and to R</a>
    <a class="dropdown-item" href="../articles/day_2.html">Day 2: Data Management, Visualization, and Analysis</a>
    <a class="dropdown-item" href="../articles/day_3.html">Day 3: Single Cell Data; Survival Analysis</a>
    <a class="dropdown-item" href="../articles/z_appendix.html">Appendix</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mtmorgan/RPG520/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Appendix</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mtmorgan/RPG520/blob/HEAD/vignettes/z_appendix.Rmd" class="external-link"><code>vignettes/z_appendix.Rmd</code></a></small>
      <div class="d-none name"><code>z_appendix.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="section level3">
<h3 id="r">
<em>R</em><a class="anchor" aria-label="anchor" href="#r"></a>
</h3>
<p>Install <em>R</em> for your operating system from the Comprehensive
<em>R</em> Archive Network <a href="http://CRAN.R-project.org/" class="external-link">CRAN</a>. The box at the top of the
page has links for Linux, macOS, and Windows.</p>
<p>On Windows, see the link <a href="https://CRAN.R-project.org/bin/windows/base/" class="external-link">install <em>R</em>
for the first time</a>. The link will download an installer that can be
double-clicked. Install as a regular user, not as a system
administrator.</p>
<p>On macOS, use the ‘R-4.3.2-arm64.pkg’ installer for newer (M1 / M2
macOS) and ‘R-4.3.2-x86_64.pkg’ for Intel macs.</p>
<p>Linux systems can of course be more complicated; follow the links for
your operating system.</p>
</div>
<div class="section level3">
<h3 id="rstudio">
<em>RStudio</em><a class="anchor" aria-label="anchor" href="#rstudio"></a>
</h3>
<p>It is possible to use <em>R</em> without using <em>RStudio</em> (this
is how I usually use <em>R</em>, for instance), but many people use the
open-source version of <em>RStudio</em>. Download the open-source
version of <a href="https://posit.co/download/rstudio-desktop/" class="external-link">RStudio
Desktop</a> from Posit, the company that produces <em>RStudio</em>.</p>
</div>
</div>
<div class="section level2">
<h2 id="packages">Packages<a class="anchor" aria-label="anchor" href="#packages"></a>
</h2>
<p>If you are installing <em>R</em> on your own laptop for the purposes
of this course, you’ll need to install the packages that we use.
<em>R</em> on the CCR has many packages pre-installed. But there are
more than 20,000 packages in CRAN and Bioconductor, so at some point you
will need a package that is not installed.</p>
<p>Follow this general approach. Note that packages only need to be
installed <em>once</em>; once installed, they can then be used in
separate <em>R</em> sessions using <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code> or the
<code>pkg::function()</code> notation.</p>
<div class="section level3">
<h3 id="cran-package-installation">CRAN package installation<a class="anchor" aria-label="anchor" href="#cran-package-installation"></a>
</h3>
<p>Start by creating a vector of packages to install. For this workshop,
we used the following packages.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pkgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"readr"</span>, <span class="st">"dplyr"</span>, <span class="st">"tidyr"</span>, <span class="st">"ggplot2"</span>,</span>
<span>    <span class="st">"plotly"</span>, <span class="st">"survival"</span>, <span class="st">"ggsurvfit"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Use <code><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">setdiff()</a></code> (remove from the vector in the first
argument all elements that occur in the vector in the second argument)
so that only packages that are not currently installed remain.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pkgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="va">pkgs</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Finally, use the function <code><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages()</a></code> to install
the required packages from a central CRAN repository.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="va">pkgs</span>, repos <span class="op">=</span> <span class="st">"https://CRAN.R-project.org"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="bioconductor-packages">Bioconductor packages<a class="anchor" aria-label="anchor" href="#bioconductor-packages"></a>
</h3>
<p><a href="https://bioconductor.org/packages" class="external-link">Bioconductor</a> packages
require a slightly different installation procedure. Make sure that you
have the <a href="https://CRAN.R-project.org/package=BiocManager" class="external-link">BiocManager</a>
package installed from CRAN</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pkgs</span> <span class="op">&lt;-</span> <span class="st">"BiocManager"</span></span>
<span><span class="va">pkgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="va">pkgs</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="va">pkgs</span>, repos <span class="op">=</span> <span class="st">"https://CRAN.R-project.org"</span><span class="op">)</span></span></code></pre></div>
<p>Then install <a href="https://bioconductor.org/packages" class="external-link">Bioconductor</a> (and CRAN)
packages as needed</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pkgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"cellxgenedp"</span>, <span class="co"># Bioconductor package</span></span>
<span>    <span class="st">"Seurat"</span>       <span class="co"># CRAN package</span></span>
<span><span class="op">)</span></span>
<span><span class="va">pkgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="va">pkgs</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu">install</span><span class="op">(</span><span class="va">pkgs</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="updating-packages">Updating packages<a class="anchor" aria-label="anchor" href="#updating-packages"></a>
</h3>
<p><code><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages()</a></code> and
<code>BiocManager::install()</code> report packages that are out-of-date
because a newer version is available. Usually it is a good idea to be
using the most recent version available. There are two situations when
you might wish to continue using older packages.</p>
<ul>
<li><p>A tight deadline (e.g., thesis defense, paper submission).
Updating packages can sometimes introduce changes that break existing
code, and it can be time consuming to track these down.</p></li>
<li>
<p>Reproducibility. Packages sometimes introduce changes that result
in (hopefully slightly) different outcomes, perhaps because the packages
adopts a newer algorithm. This might not be desireable, e.g., when a
paper has been submitted and the reviewer says ‘this is excellent expect
…’ it requires a minor addition to the orginal analysis, but when you
try and reproduce your original analysis it is no longer possible
because of changes in the underlying software.</p>
<p>There are a number of strategies for taking a ‘snapshot’ of software
versions used in a particular analysis (e.g., the <a href="https://rstudio.github.io/renv/index.html" class="external-link">renv</a> package), and
if you become serious about using <em>R</em> it is very valuable to
explore these resources <em>before</em> you need to reproduce
them.</p>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="faq-binary-or-source-packages">FAQ: binary or source packages?<a class="anchor" aria-label="anchor" href="#faq-binary-or-source-packages"></a>
</h3>
<p>On Windows and macOS, one might sometimes see a message that
indicates a ‘binary’ package is available, but the ‘source’ package is
more recent. Almost always the best response is to stay with the
‘binary’ package – the more-recent ‘source’ package will likely be made
available in a short time frame (within a week), and if not indicates
that the package is difficult to install even by the wizards at CRAN –
mortals like you and I will have to become very proficient to install
Windows or macOS packages from source.</p>
</div>
</div>
<div class="section level2">
<h2 id="data-used-in-this-workshop">Data used in this workshop<a class="anchor" aria-label="anchor" href="#data-used-in-this-workshop"></a>
</h2>
<p>Datasets used in this workshop are available on the CCR. They can
also be accessed on the internet. The URL for each dataset is the
<code>base_url</code> pasted before the file name used in this document.
Thus the ALL dataset is available at</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">base_url</span> <span class="op">&lt;-</span></span>
<span>    <span class="st">"https://raw.githubusercontent.com/mtmorgan/RPG520/main/inst/extdata/"</span></span>
<span><span class="va">ALL_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">base_url</span>, <span class="st">"ALL.csv"</span><span class="op">)</span></span></code></pre></div>
<p>It can be read directly into <em>R</em></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="va">ALL_url</span><span class="op">)</span></span></code></pre></div>
<p>Or downloaded to disk for easy re-use</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span><span class="op">(</span><span class="va">ALL_url</span>, <span class="st">"ALL.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="questions-arising">Questions arising<a class="anchor" aria-label="anchor" href="#questions-arising"></a>
</h2>
<div class="section level3">
<h3 id="tidy-versus-wide-data">‘tidy’ versus ‘wide’ data<a class="anchor" aria-label="anchor" href="#tidy-versus-wide-data"></a>
</h3>
<p>Suppose you observed tumor weight on 5 mice over 3 weeks. You could
represent this data as a <code>tibble</code> / <code>data.frame</code>
with columns ‘mouse’, ‘week’, ‘tumor_weight’.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>    mouse <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, each <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>    week <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, times <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,</span>
<span>    tumor_weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">15</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">tbl</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 15 × 3</span></span></span>
<span><span class="co">##    mouse  week tumor_weight</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> A         1       0.558 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> A         2       0.401 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> A         3       0.243 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> B         1       0.735 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> B         2       0.325 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> B         3       0.092<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> C         1       0.263 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> C         2       0.304 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> C         3       0.539 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> D         1       0.411 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">11</span> D         2       0.293 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">12</span> D         3       0.318 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">13</span> E         1       0.644 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">14</span> E         2       0.741 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">15</span> E         3       0.268</span></span></code></pre></div>
<p>Each row represents an <em>observation</em>. Each column represents a
<em>variable</em>. Each combination of ‘mouse’ and ‘week’ is associated
with an <em>observation</em> of ’tumor_weight`. <strong>Tidy data
simplifies data management</strong> and we use it throughout the
workshop. For instance, it’s easy to compute the average tumor weight
each week</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">week</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>n_mice <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>, av_wt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">tumor_weight</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">##    week n_mice av_wt</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>     1      5 0.522</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>     2      5 0.413</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>     3      5 0.292</span></span></code></pre></div>
<p>Or to add another observation, e.g., <code>mouse_weight</code></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>mouse_weight <span class="op">=</span> <span class="fl">5</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">15</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 15 × 4</span></span></span>
<span><span class="co">##    mouse  week tumor_weight mouse_weight</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> A         1       0.558          4.50</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> A         2       0.401          4.87</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> A         3       0.243          4.35</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> B         1       0.735          5.20</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> B         2       0.325          3.10</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> B         3       0.092<span style="text-decoration: underline;">5</span>         5.02</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> C         1       0.263          5.37</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> C         2       0.304          6.27</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> C         3       0.539          2.40</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> D         1       0.411          4.28</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">11</span> D         2       0.293          6.48</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">12</span> D         3       0.318          3.47</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">13</span> E         1       0.644          6.50</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">14</span> E         2       0.741          3.60</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">15</span> E         3       0.268          6.99</span></span></code></pre></div>
<p>Our original data on <code>tumor\_weight</code> could be represented
in a ‘wide’ format, e.g.,</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span></span>
<span>               names_from <span class="op">=</span> <span class="st">"week"</span>, names_prefix <span class="op">=</span> <span class="st">"week_"</span>,</span>
<span>               values_from <span class="op">=</span> <span class="st">"tumor_weight"</span></span>
<span>           <span class="op">)</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">##   mouse week_1 week_2 week_3</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> A      0.558  0.401 0.243 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> B      0.735  0.325 0.092<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> C      0.263  0.304 0.539 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> D      0.411  0.293 0.318 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> E      0.644  0.741 0.268</span></span></code></pre></div>
<p>This representation might be useful for summary in a paper or
presentation, but it is less easy to manipulate, e.g., what is the
average tumor weight each week? how can we add ’mouse_weight` to this
data?</p>
<p>The <a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html" class="external-link">tidyr
vignette</a> provides a more detailed discussion of these issues.</p>
</div>
<div class="section level3">
<h3 id="minimum-p-values">Minimum <em>p</em> values?<a class="anchor" aria-label="anchor" href="#minimum-p-values"></a>
</h3>
<p>Tracking this down requires some pretty expert <em>R</em> knowledge.
TL;DR is that <em>R</em> does actually report small <em>p</em> values as
‘&lt; 2.2e-16’. The actual <em>p</em> value is available from the object
returned by, e.g., <code><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">t.test()</a></code>.</p>
<p>It was noted during the workshop that ‘all our P-values seem to be
&lt; 2.2e-16, is this some minimum enforced by <em>R</em>?’. For example
we read in the ‘brfss’ data, made ‘Sex’ and ‘Year’ factors, then created
two subsets, for samples from 2010 and for Male samples from both
years.</p>
<p>Performing a <em>t</em>-test to ask whether males differed in weight
between years leads to</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">t.test</a></span><span class="op">(</span><span class="va">Weight</span> <span class="op">~</span> <span class="va">Year</span>, <span class="va">brfss_male</span><span class="op">)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##  Welch Two Sample t-test</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## data:  Weight by Year</span></span>
<span><span class="co">## t = -20.751, df = 6549.4, p-value &lt; 2.2e-16</span></span>
<span><span class="co">## alternative hypothesis: true difference in means between group 1990 and group 2010 is not equal to 0</span></span>
<span><span class="co">## 95 percent confidence interval:</span></span>
<span><span class="co">##  -8.390845 -6.942327</span></span>
<span><span class="co">## sample estimates:</span></span>
<span><span class="co">## mean in group 1990 mean in group 2010 </span></span>
<span><span class="co">##           81.17999           88.84657</span></span></code></pre></div>
<p>The output says ‘p-value &lt; 2.2e-16’. We see the same
<em>p</em>-value when performing a regression of Weight on Height in the
2010 Male sample</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">brfss_male_2010</span> <span class="op">&lt;-</span></span>
<span>    <span class="va">brfss_male</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Year</span> <span class="op">==</span> <span class="st">"2010"</span><span class="op">)</span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">Weight</span> <span class="op">~</span> <span class="va">Height</span>, <span class="va">brfss_male_2010</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/anova.html" class="external-link">anova</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span><span class="co">## Analysis of Variance Table</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Response: Weight</span></span>
<span><span class="co">##             Df  Sum Sq Mean Sq F value    Pr(&gt;F)    </span></span>
<span><span class="co">## Height       1  197664  197664   693.8 &lt; 2.2e-16 ***</span></span>
<span><span class="co">## Residuals 3617 1030484     285                      </span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span></code></pre></div>
<p>(Maybe it’s reassuring to note that the <em>p</em>-value isn’t always
‘&lt; 2.2e-16’, e.g., when comparing the age of Male and Female
respondents in 2010)</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">t.test</a></span><span class="op">(</span><span class="va">Age</span> <span class="op">~</span> <span class="va">Sex</span>, <span class="va">brfss_2010</span><span class="op">)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##  Welch Two Sample t-test</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## data:  Age by Sex</span></span>
<span><span class="co">## t = 2.4497, df = 7768.7, p-value = 0.01432</span></span>
<span><span class="co">## alternative hypothesis: true difference in means between group Female and group Male is not equal to 0</span></span>
<span><span class="co">## 95 percent confidence interval:</span></span>
<span><span class="co">##  0.1674909 1.5091167</span></span>
<span><span class="co">## sample estimates:</span></span>
<span><span class="co">## mean in group Female   mean in group Male </span></span>
<span><span class="co">##             57.08824             56.24993</span></span></code></pre></div>
<p>Emily noted that we can assign the result of <code><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">t.test()</a></code> or
<code><a href="https://rdrr.io/r/stats/anova.html" class="external-link">anova()</a></code> to a variable, and then use <code>$</code> to
extract the <em>p</em>-value, e.g.,</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">t.test</a></span><span class="op">(</span><span class="va">Weight</span> <span class="op">~</span> <span class="va">Year</span>, <span class="va">brfss_male</span><span class="op">)</span></span>
<span><span class="va">tt</span><span class="op">$</span><span class="va">p.value</span></span>
<span><span class="co">## [1] 1.095642e-92</span></span></code></pre></div>
<p>The <em>p</em>-value extracted from <code>tt</code> is indeed less
than 2.2e-16 so the <code><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">t.test()</a></code> printout is not lying. But why
2.2e-16?</p>
<p>I looked at the help pages <code><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">?t.test</a></code> and <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">?lm</a></code>
and didn’t see anything that looked helpful. I then used some expert
<em>R</em> knowledge to try and dig a bit further. I know that a
variable has a ‘class’, and that there are ‘methods’ that operate on
classes, and that when a variable is printed, it actually might involve
a ‘print’ method or perhaps a ‘format’ method. OK, so what is the class
of <code>tt</code>?</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">tt</span><span class="op">)</span></span>
<span><span class="co">## [1] "htest"</span></span></code></pre></div>
<p>And what methods are defined on an object of class ‘htest’?</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/methods.html" class="external-link">methods</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"htest"</span><span class="op">)</span></span>
<span><span class="co">## [1] print</span></span>
<span><span class="co">## see '?methods' for accessing help and source code</span></span></code></pre></div>
<p>Again using expert <em>R</em> knowledge, I know that the ‘print’
method on an object of class ‘htest’ is the function
<code>print.htest</code> and I looked up the help
<code><a href="https://rdrr.io/r/stats/print.power.htest.html" class="external-link">?print.htest</a></code>. This was not helpful. So I looked at the
function definition for <code>print.htest</code> with</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/getAnywhere.html" class="external-link">getAnywhere</a></span><span class="op">(</span><span class="va">print.htest</span><span class="op">)</span></span>
<span><span class="co">## A single object matching 'print.htest' was found</span></span>
<span><span class="co">## It was found in the following places</span></span>
<span><span class="co">##   registered S3 method for print from namespace stats</span></span>
<span><span class="co">##   namespace:stats</span></span>
<span><span class="co">## with value</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## function (x, digits = getOption("digits"), prefix = "\t", ...) </span></span>
<span><span class="co">## {</span></span>
<span><span class="co">##     cat("\n")</span></span>
<span><span class="co">##     cat(strwrap(x$method, prefix = prefix), sep = "\n")</span></span>
<span><span class="co">##     cat("\n")</span></span>
<span><span class="co">##     cat("data:  ", x$data.name, "\n", sep = "")</span></span>
<span><span class="co">##     out &lt;- character()</span></span>
<span><span class="co">##     if (!is.null(x$statistic)) </span></span>
<span><span class="co">##         out &lt;- c(out, paste(names(x$statistic), "=", format(x$statistic, </span></span>
<span><span class="co">##             digits = max(1L, digits - 2L))))</span></span>
<span><span class="co">##     if (!is.null(x$parameter)) </span></span>
<span><span class="co">##         out &lt;- c(out, paste(names(x$parameter), "=", format(x$parameter, </span></span>
<span><span class="co">##             digits = max(1L, digits - 2L))))</span></span>
<span><span class="co">##     if (!is.null(x$p.value)) {</span></span>
<span><span class="co">##         fp &lt;- format.pval(x$p.value, digits = max(1L, digits - </span></span>
<span><span class="co">##             3L))</span></span>
<span><span class="co">##         out &lt;- c(out, paste("p-value", if (startsWith(fp, "&lt;")) fp else paste("=", </span></span>
<span><span class="co">##             fp)))</span></span>
<span><span class="co">##     }</span></span>
<span><span class="co">##     cat(strwrap(paste(out, collapse = ", ")), sep = "\n")</span></span>
<span><span class="co">##     if (!is.null(x$alternative)) {</span></span>
<span><span class="co">##         cat("alternative hypothesis: ")</span></span>
<span><span class="co">##         if (!is.null(x$null.value)) {</span></span>
<span><span class="co">##             if (length(x$null.value) == 1L) {</span></span>
<span><span class="co">##                 alt.char &lt;- switch(x$alternative, two.sided = "not equal to", </span></span>
<span><span class="co">##                   less = "less than", greater = "greater than")</span></span>
<span><span class="co">##                 cat("true ", names(x$null.value), " is ", alt.char, </span></span>
<span><span class="co">##                   " ", x$null.value, "\n", sep = "")</span></span>
<span><span class="co">##             }</span></span>
<span><span class="co">##             else {</span></span>
<span><span class="co">##                 cat(x$alternative, "\nnull values:\n", sep = "")</span></span>
<span><span class="co">##                 print(x$null.value, digits = digits, ...)</span></span>
<span><span class="co">##             }</span></span>
<span><span class="co">##         }</span></span>
<span><span class="co">##         else cat(x$alternative, "\n", sep = "")</span></span>
<span><span class="co">##     }</span></span>
<span><span class="co">##     if (!is.null(x$conf.int)) {</span></span>
<span><span class="co">##         cat(format(100 * attr(x$conf.int, "conf.level")), " percent confidence interval:\n", </span></span>
<span><span class="co">##             " ", paste(format(x$conf.int[1:2], digits = digits), </span></span>
<span><span class="co">##                 collapse = " "), "\n", sep = "")</span></span>
<span><span class="co">##     }</span></span>
<span><span class="co">##     if (!is.null(x$estimate)) {</span></span>
<span><span class="co">##         cat("sample estimates:\n")</span></span>
<span><span class="co">##         print(x$estimate, digits = digits, ...)</span></span>
<span><span class="co">##     }</span></span>
<span><span class="co">##     cat("\n")</span></span>
<span><span class="co">##     invisible(x)</span></span>
<span><span class="co">## }</span></span>
<span><span class="co">## &lt;bytecode: 0x55f7b06075c0&gt;</span></span>
<span><span class="co">## &lt;environment: namespace:stats&gt;</span></span></code></pre></div>
<p>This is the function that is used to print the result returned by
<code><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">t.test()</a></code>. I scanned the code looking for ‘p-value’, and
spotted the lines</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(x<span class="sc">$</span>p.value)) {</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>        fp <span class="ot">&lt;-</span> <span class="fu">format.pval</span>(x<span class="sc">$</span>p.value, <span class="at">digits =</span> <span class="fu">max</span>(1L, digits <span class="sc">-</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>            3L))</span></code></pre></div>
<p>this says ‘if the object I am trying to print includes a p.value,
then use the function <code><a href="https://rdrr.io/r/base/format.pval.html" class="external-link">format.pval()</a></code> to format the
<em>p</em>-value for output’. OK, so off to <code><a href="https://rdrr.io/r/base/format.pval.html" class="external-link">?format.pval</a></code>.
The help page is actually helpful, in a way. It says that
<code>format.pval</code> takes an argument <code>eps</code>, and that
values</p>
<pre><code>    less than 'eps' are formatted as '"&lt; [eps]"'</code></pre>
<p>Also, the help page says that <code>eps</code> has a default
value</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">.Machine</span><span class="op">$</span><span class="va">double.eps</span></span>
<span><span class="co">## [1] 2.220446e-16</span></span></code></pre></div>
<p>Aha! Our magic 2.2e-16! The help page <code><a href="https://rdrr.io/r/base/zMachine.html" class="external-link">?.Machine</a></code> is also
helpful-ish, with the description</p>
<pre><code>double.eps: the smallest positive floating-point number 'x' such that
          '1 + x != 1'.  It equals 'double.base ^ ulp.digits' if either
          'double.base' is 2 or 'double.rounding' is 0; otherwise, it
          is '(double.base ^ double.ulp.digits) / 2'.  Normally
          '2.220446e-16'.</code></pre>
<p>This is getting at a fundamental challenge in digital computers –
numbers are represented as a sequence of bits (0 and 1 values). This
means that floating point (non-integer) numbers are only represented
approximately – for a given number of bits used to represent a floating
point number, there is a smallest difference that can be represented
without loss of precision. What <code>.Machine$double.eps</code> is
reporting is the smallest difference that our particular computer, using
whatever rules it uses to decide on how many bits to use for a
floating-point number, can actually represent such that
<code>1 + x != 1</code>. Most computers adopt the same convention for
representing floating point numbers, so usually
<code>.Machine$double.eps</code> is 2.2e-16.</p>
<p><code><a href="https://rdrr.io/r/base/format.pval.html" class="external-link">format.pval()</a></code> is saying that it can’t really tell the
difference between very small numbers, all it can know for certain is
that the very small number is smaller than the smallest number it can
distinguish – 1.095642e-92 is definitely less than 2.220446e-16, but how
much less is not known with any accuracy.</p>
<p>Phew.</p>
</div>
<div class="section level3">
<h3 id="coloring-points-in-ggplot">Coloring points in ggplot<a class="anchor" aria-label="anchor" href="#coloring-points-in-ggplot"></a>
</h3>
<p>Here’s a simple dataset showing the relationship between miles per
gallon ‘mpg’ and displacement ‘disp’ with points colored by transmission
(‘am’, 0 is automatic, 1 is manual; using <code>factor(am)</code> turns
the continuous variable into a factor, and factors are colored using
‘qualitative’ color schemes, rather than ‘quantitative’ color
schemes)</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="va">plt</span> <span class="op">&lt;-</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">disp</span>, y <span class="op">=</span> <span class="va">mpg</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">am</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">plt</span></span></code></pre></div>
<p><img src="z_appendix_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
<p>Suppose we’d like to color the points differently, say ‘red’ for
automatic and ‘black’ for manual transmissions. A little googling took
me to add another layer</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plt</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red"</span>, <span class="st">"black"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="z_appendix_files/figure-html/unnamed-chunk-20-1.png" width="700"></p>
<p>The values can be named colors as above, or ‘RBG’ values. As
mentioned in class, the color choice is not arbitrary, but rather
carefully considered. The [RColorBrewer][] package includes palettes of
carefully considered colors. Here are colorblind-friendly palettes for
‘qualitative’ data</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">RColorBrewer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html" class="external-link">display.brewer.all</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"qual"</span>, colorblindFriendly<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="z_appendix_files/figure-html/unnamed-chunk-21-1.png" width="700"></p>
<p>We can use the ‘Paired’ scheme, for instance, with</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plt</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_color_brewer</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"qual"</span>, palette <span class="op">=</span> <span class="st">"Paired"</span><span class="op">)</span></span></code></pre></div>
<p><img src="z_appendix_files/figure-html/unnamed-chunk-22-1.png" width="700"></p>
<p>The help page <code><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">?scale_color_manual</a></code> provides additional
detail on both how and why to color points. The <a href="https://r-graph-gallery.com/ggplot2-color.html" class="external-link">R Graph
Gallery</a> is a useful resource for further information.</p>
</div>
<div class="section level3">
<h3 id="r-flavored-markdown">
<em>R</em>-flavored markdown<a class="anchor" aria-label="anchor" href="#r-flavored-markdown"></a>
</h3>
<p>Markdown is a great plain-text format for writing documents and
reports. <em>R</em>-flavored markdown allows <em>R</em> code ‘chunks’ to
be embedded in the markdown document. The document can then be processed
to, e.g., plain markdown or html or slides to share with others. During
processing the <em>R</em> code chunks are evaluated. This means that you
can can describe what and why you’re doing something, then show what you
actually did, and present figures or tables summarizing your results.
This is a great tool for reproducible, communicable research.</p>
<p>An easy way to start is to use the ‘File -&gt; New File -&gt; R
Markdown…’ menu in <em>RStudio</em>. This generates a demonstration
document that you can tweak and explore. Build it to HTML by pressing
the ‘knit…’ button on the markdown document pane. A <a href="https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf" class="external-link">cheat
sheet</a> provides some further hints. Ask Google for additional
questions.</p>
</div>
<div class="section level3">
<h3 id="creating-an-r-package">Creating an <em>R</em> package<a class="anchor" aria-label="anchor" href="#creating-an-r-package"></a>
</h3>
<p>An <em>R</em> package can be a great way to bundle an analysis into a
reproducible unit, or to share new analysis methods you’ve developed
with colleagues.</p>
<p>I asked ChatGPT to tell me how to ‘create an <em>R</em> package using
devtools, usethis, and roxygen2’, and got a pretty good starting point –
give it a try! The package I mentioned in my query are</p>
<ul>
<li>
<a href="https://CRAN.R-project.org/package=devtools" class="external-link">devtools</a>:
use <code>create()</code> to make a package skeleton,
<code>load_all()</code> during package developement to load the current
package into your <em>R</em> session, <code>check()</code>,
<code>build()</code>, and <code>install()</code> to check that your
package is syntactically correct, build it into a ‘tar ball’ for sharing
with others, and install it in your <em>R</em> library for subsequent
use via <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library(YourPackage)</a></code>.</li>
<li>
<a href="https://CRAN.R-project.org/package=usethis" class="external-link">usethis</a> for
adding components to your package, e.g., <code>use_vignette()</code> to
add a vigentte, <code>use_mit_license()</code> (for instance) to add a
license that indicates how you allow your package to be used by others,
etc.</li>
<li>
<a href="https://CRAN.R-project.org/package=roxygen2" class="external-link">roxygen2</a>
for documenting functions in your package.</li>
</ul>
<p>Package vignettes (e.g., <code>vignette(package="roxygen2")</code>)
and Google are great resources during package development.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Martin Morgan.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
