<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="RPG520">
<title>Day 1: Introduction to the CCR, and to R • RPG520</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Day 1: Introduction to the CCR, and to R">
<meta property="og:description" content="RPG520">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">RPG520</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9007</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/day_1.html">Day 1: Introduction to the CCR, and to R</a>
    <a class="dropdown-item" href="../articles/day_2.html">Day 2: Data Management, Visualization, and Analysis</a>
    <a class="dropdown-item" href="../articles/day_3.html">Day 3: Single Cell Data; Survival Analysis</a>
    <a class="dropdown-item" href="../articles/z_appendix.html">Appendix</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mtmorgan/RPG520/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Day 1: Introduction to the CCR, and to R</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mtmorgan/RPG520/blob/HEAD/vignettes/day_1.Rmd" class="external-link"><code>vignettes/day_1.Rmd</code></a></small>
      <div class="d-none name"><code>day_1.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="connecting-to-the-ccr">Connecting to the CCR<a class="anchor" aria-label="anchor" href="#connecting-to-the-ccr"></a>
</h2>
<p>We’ll use the UB CCR computer cluster for the workshop. This
(hopefully) simplifies initial steps in ‘getting going’, while
introducing the main resource available when your desktop is not
sufficient. See the <a href="z_appendix.html">appendix</a> if you would
like to install <em>R</em> and <em>RStudio</em> on your own laptop.</p>
<p>Visit and sign in, using your UB id, from a Roswell Park or UB
network: <a href="https://ondemand.ccr.buffalo.edu" class="external-link uri">https://ondemand.ccr.buffalo.edu</a></p>
<p><img src="images/login.png"></p>
<p>o ## From CCR to RStudio</p>
<ol style="list-style-type: decimal">
<li>
<p>Use your browser to navigate to <a href="https://ondemand.ccr.buffalo.edu/" class="external-link uri">https://ondemand.ccr.buffalo.edu/</a>. Look under the “GUIs”
section, and choose ‘RStudio Server’.</p>
<p><img src="images/CCR-RStudio.png"></p>
</li>
<li>
<p>Provide details on the next screen, then click ‘Launch’</p>
<p><img src="images/config.png"></p>
</li>
</ol>
<ul>
<li>‘Cluster’: choose “Faculty - privately owned nodes” (these are
‘Roswell’ nodes)
<ul>
<li>‘Slurm account’: choose your user name.</li>
<li>‘Partition’: choose ‘rpci’.</li>
<li>‘Quality of Service (QOS)’: choose ‘rpci’</li>
<li>‘Number of hours requested’: choose 2; you’ll be unceremoniously
kicked off after this number of hours, so save any
work-in-progress.</li>
</ul>
</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>
<p>Clicking the ‘Launch’ button puts your request for compute
resources into a queue. You have to wait. Not too long. Hopefully.</p>
<p><img src="images/queue.png"></p>
</li>
<li>
<p>Eventually the CCR finds resources for your job, and the queue
status changes to ‘Running’, with a link to ‘Connect to RStudio Server’.
Click on the link to get to your own session of RStudio.</p>
<p><img src="images/launch.png"></p>
</li>
</ol>
<div class="section level3">
<h3 id="rstudio">RStudio<a class="anchor" aria-label="anchor" href="#rstudio"></a>
</h3>
<p>We’ll use <em>RStudio</em> extensively. To get going, copy and paste
the following line into the ‘Console’</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="st">'/projects/rpci/rplect/Rpg520/Rsetdirs.R'</span><span class="op">)</span></span></code></pre></div>
<p><img src="images/rstudio.png"></p>
<p>OK, we are ready to go!</p>
</div>
</div>
<div class="section level2">
<h2 id="introduction-to-r">Introduction to <em>R</em><a class="anchor" aria-label="anchor" href="#introduction-to-r"></a>
</h2>
<div class="section level3">
<h3 id="essential-r">Essential <em>R</em><a class="anchor" aria-label="anchor" href="#essential-r"></a>
</h3>
<p>A simple calculator</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">+</span> <span class="fl">1</span></span>
<span><span class="co">## [1] 2</span></span></code></pre></div>
<p>‘Vectors’ as building blocks</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">## [1] 1 2 3</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"January"</span>, <span class="st">"February"</span>, <span class="st">"March"</span><span class="op">)</span></span>
<span><span class="co">## [1] "January"  "February" "March"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">## [1]  TRUE FALSE</span></span></code></pre></div>
<p>Variables, missing values and ‘factors’</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">27</span>, <span class="cn">NA</span>, <span class="fl">32</span>, <span class="fl">29</span><span class="op">)</span></span>
<span><span class="va">gender</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Female"</span>, <span class="st">"Male"</span>, <span class="st">"Non-binary"</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>    levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Female"</span>, <span class="st">"Male"</span>, <span class="st">"Non-binary"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Data structures to coordinate related vectors – the
<code>data.frame</code></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">27</span>, <span class="cn">NA</span>, <span class="fl">32</span>, <span class="fl">29</span><span class="op">)</span>,</span>
<span>    gender <span class="op">=</span> <span class="va">gender</span></span>
<span><span class="op">)</span></span>
<span><span class="va">df</span></span>
<span><span class="co">##   age     gender</span></span>
<span><span class="co">## 1  27     Female</span></span>
<span><span class="co">## 2  NA       Male</span></span>
<span><span class="co">## 3  32 Non-binary</span></span>
<span><span class="co">## 4  29       &lt;NA&gt;</span></span></code></pre></div>
<p>Key operations on <code>data.frame</code></p>
<ul>
<li>
<code>df[1:3, c("gender", "age")]</code> – subset on rows and
columns</li>
<li>
<code>df[["age"]]</code>, <code>df$age</code> – select columns</li>
</ul>
<p>Functions</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>        <span class="co"># 5 random normal deviates</span></span>
<span><span class="co">## [1] -0.06210518  0.24516361 -0.19609835  1.71203274  0.81528088</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span> <span class="co"># 100 random normal deviates</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>         <span class="co"># histogram, approximately normal</span></span></code></pre></div>
<p><img src="day_1_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/density.html" class="external-link">density</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="co"># a little more sophisticated?</span></span></code></pre></div>
<p><img src="day_1_files/figure-html/unnamed-chunk-7-2.png" width="700"></p>
<p>‘Vectorized’ operations, e.g., element-wise addition without an
explicit ‘for’ loop. The following creates a vector <code>y</code> by
element-wise addition of the 100 elements of vector <code>x</code> with
100 random normal deviates.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<p><code>x</code> and <code>y</code> are related, so place them as
columns in a <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code>. There are 100 rows in the
<code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code>, <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code> shows the first 6
rows.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">## [1] 100</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">##            x           y</span></span>
<span><span class="co">## 1  0.9065301  2.71419475</span></span>
<span><span class="co">## 2  1.1569693 -0.77572800</span></span>
<span><span class="co">## 3 -1.6895861 -1.88289615</span></span>
<span><span class="co">## 4 -1.6309127  0.02820584</span></span>
<span><span class="co">## 5 -0.2899156 -1.09143588</span></span>
<span><span class="co">## 6 -0.4569814 -1.09245563</span></span></code></pre></div>
<p>There is a statistical relationship between <code>y</code> and
<code>x</code>, specifically, <code>y</code> is equal to <code>x</code>
plus some random noise. Visualize this using <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, <span class="va">df</span><span class="op">)</span></span></code></pre></div>
<p><img src="day_1_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>It looks like a linear relationship; can we demonstrate this
statistically? Use the <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code> function to fit a
<em>l</em>inear <em>m</em>odel to the relationship between
<code>y</code> and <code>x</code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, <span class="va">df</span><span class="op">)</span></span>
<span><span class="va">fit</span>           <span class="co"># an R 'object' containing information about the</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Call:</span></span>
<span><span class="co">## lm(formula = y ~ x, data = df)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Coefficients:</span></span>
<span><span class="co">## (Intercept)            x  </span></span>
<span><span class="co">##      0.2201       0.9528</span></span>
<span>              <span class="co"># regression of y on x</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span>  <span class="co"># statistical summary of linear regression</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Call:</span></span>
<span><span class="co">## lm(formula = y ~ x, data = df)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Residuals:</span></span>
<span><span class="co">##      Min       1Q   Median       3Q      Max </span></span>
<span><span class="co">## -2.30881 -0.86474 -0.02979  0.78164  2.74463 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Coefficients:</span></span>
<span><span class="co">##             Estimate Std. Error t value Pr(&gt;|t|)    </span></span>
<span><span class="co">## (Intercept)   0.2201     0.1091   2.017   0.0464 *  </span></span>
<span><span class="co">## x             0.9528     0.1181   8.067 1.82e-12 ***</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Residual standard error: 1.09 on 98 degrees of freedom</span></span>
<span><span class="co">## Multiple R-squared:  0.3991, Adjusted R-squared:  0.3929 </span></span>
<span><span class="co">## F-statistic: 65.08 on 1 and 98 DF,  p-value: 1.822e-12</span></span></code></pre></div>
<p>What about adding the regression line to the scatter plot? Do this by
plotting the points, and then adding <code><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline()</a></code> to add the
straight line implied by the linear model fit.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, <span class="va">df</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, <span class="va">df</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="day_1_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<div class="section level4">
<h4 id="a-little-more-advanced">A little more advanced…<a class="anchor" aria-label="anchor" href="#a-little-more-advanced"></a>
</h4>
<p>Write your own functions</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hello</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">who</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"hello"</span>, <span class="va">who</span>, <span class="st">"with"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">who</span><span class="op">)</span>, <span class="st">"letters in your name"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">hello</span><span class="op">(</span><span class="st">"Martin"</span><span class="op">)</span></span>
<span><span class="co">## [1] "hello Martin with 6 letters in your name"</span></span></code></pre></div>
<p>Iterate, usually with <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></code> although
<code>for()</code> is available</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Martin"</span>, <span class="st">"Thomas"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">names</span>, <span class="va">hello</span><span class="op">)</span></span>
<span><span class="co">## [[1]]</span></span>
<span><span class="co">## [1] "hello Martin with 6 letters in your name"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[2]]</span></span>
<span><span class="co">## [1] "hello Thomas with 6 letters in your name"</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="packages">Packages<a class="anchor" aria-label="anchor" href="#packages"></a>
</h3>
<p>Packages extend functionality of base <em>R</em>. Can be part of the
‘base’ distribution (<code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code> is from the ‘stats’ package)…</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x</span><span class="op">)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Call:</span></span>
<span><span class="co">## stats::lm(formula = y ~ x)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Coefficients:</span></span>
<span><span class="co">## (Intercept)            x  </span></span>
<span><span class="co">##      0.2201       0.9528</span></span></code></pre></div>
<p>… or a package contributed by users to the Comprehensive R Archive
Network (<a href="https://CRAN.R-project.org" class="external-link">CRAN</a>), or to <a href="https://bioconductor.org" class="external-link">Bioconductor</a> or other
repositories.</p>
<ul>
<li>CRAN – more than 20,000 packages (!) <a href="https://CRAN.R-project.org" class="external-link uri">https://CRAN.R-project.org</a>
<ul>
<li>Use <code><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages()</a></code> to install CRAN packages</li>
</ul>
</li>
<li>Bioconductor – 2266 packages for high-througput genomic data
analysis <a href="https://bioconductor.org" class="external-link uri">https://bioconductor.org</a>
<ul>
<li>First install <a href="https://CRAN.R-project.org/package=BiocManager" class="external-link">BiocManager</a>
from CRAN, then use <code>BiocManager::install()</code> to install
Bioconductor packages.</li>
</ul>
</li>
</ul>
<p>A particularly common suite of packages is the ‘tidyverse’. To use
the <a href="https://CRAN.R-project.org/package=dplyr" class="external-link">dplyr</a>
contributed CRAN package, load the package</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<p>A dplyr ‘tibble’ is like a ‘data.frame’, but more user-friendly</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>,</span>
<span>    y <span class="op">=</span> <span class="va">x</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span> <span class="co"># e.g., only displays the first 10 rows</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 100 × 2</span></span></span>
<span><span class="co">##          x      y</span></span>
<span><span class="co">##      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> -<span style="color: #BB0000;">0.523</span>  -<span style="color: #BB0000;">1.84</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>  0.938   0.594</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>  0.688   2.26 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> -<span style="color: #BB0000;">0.108</span>  -<span style="color: #BB0000;">1.29</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>  1.20    1.48 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> -<span style="color: #BB0000;">1.52</span>   -<span style="color: #BB0000;">2.38</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> -<span style="color: #BB0000;">1.60</span>   -<span style="color: #BB0000;">3.65</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> -<span style="color: #BB0000;">0.997</span>  -<span style="color: #BB0000;">2.15</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> -<span style="color: #BB0000;">0.658</span>  -<span style="color: #BB0000;">0.719</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> -<span style="color: #BB0000;">0.078</span><span style="color: #BB0000; text-decoration: underline;">2</span>  0.766</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 90 more rows</span></span></span></code></pre></div>
<p>The <a href="https://CRAN.R-project.org/package=ggplot2" class="external-link">ggplot2</a>
package is often used for visualizing data</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<p><a href="https://CRAN.R-project.org/package=ggplot2" class="external-link">ggplot2</a> uses
a ‘grammar of graphics’ to assemble a plot in layers</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span> <span class="op">+</span>                    <span class="co"># use 'tbl' as a source of data for the plot</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">+</span>                  <span class="co"># use columns 'x' and 'y' for axes</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>               <span class="co"># add x and y coordinates as points</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span>   <span class="co"># add a regression line, with confidence bands</span></span>
<span><span class="co">## `geom_smooth()` using formula = 'y ~ x'</span></span></code></pre></div>
<p><img src="day_1_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="how-to-learn-r">How to Learn <em>R</em><a class="anchor" aria-label="anchor" href="#how-to-learn-r"></a>
</h3>
<p>Help</p>
<ul>
<li>
<p>Every function has a help page, e.g.,</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">data.frame</span></span></code></pre></div>
<ul>
<li>Sections with ‘Description’, ‘Usage’, ‘Arguments’ (often with
defaults), ‘Value’, ‘Examples’</li>
<li>Can be quite difficult to follow, but are usually quite
helpful.</li>
</ul>
</li>
</ul>
<p>Vignettes</p>
<ul>
<li>
<p>Many packages have ‘vignettes’ that illustrate how the package
can be used.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"dplyr"</span><span class="op">)</span></span>
<span><span class="co">## Vignettes in package 'dplyr':</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## colwise                 Column-wise operations (source, html)</span></span>
<span><span class="co">## base                    dplyr &lt;-&gt; base R (source, html)</span></span>
<span><span class="co">## grouping                Grouped data (source, html)</span></span>
<span><span class="co">## dplyr                   Introduction to dplyr (source, html)</span></span>
<span><span class="co">## programming             Programming with dplyr (source, html)</span></span>
<span><span class="co">## rowwise                 Row-wise operations (source, html)</span></span>
<span><span class="co">## two-table               Two-table verbs (source, html)</span></span>
<span><span class="co">## in-packages             Using dplyr in packages (source, html)</span></span>
<span><span class="co">## window-functions        Window functions (source, html)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"dplyr"</span>, <span class="st">"dplyr"</span><span class="op">)</span></span></code></pre></div>
</li>
</ul>
<p>Books</p>
<ul>
<li>
<a href="https://rstudio-education.github.io/hopr/" class="external-link">Hands-on
Programming with R</a> introduces <em>R</em> programming. <a href="https://rstudio-education.github.io/hopr/basics.html" class="external-link">The Very
Basics</a> provides an elementary starting point.</li>
<li>
<a href="https://r4ds.hadley.nz/" class="external-link">R for Data Science</a> is a
book-length web spanning with both introductory and more advanced
topics. One of the authors, Hadley Wickham, is the author of the <a href="https://CRAN.R-project.org/package=dplyr" class="external-link">dplyr</a> and <a href="https://CRAN.R-project.org/package=ggplot2" class="external-link">ggplot2</a> packages,
among others.</li>
</ul>
<p>Web resources</p>
<ul>
<li>Google can be a great place to find general <em>R</em> resource,
e.g., ‘how to do survival analysis in <em>R</em>’</li>
<li>
<a href="https://stackoverflow.com/questions/tagged/r" class="external-link">StackOverflow</a> is
useful for trouble-shooting particular problems – ‘I try to fit a linear
model with <code>lm(mgp ~ cyl, mtcars)</code> but <em>R</em> says …,
what am I doing wrong?’.</li>
<li>ChatGPT &amp; friends can also be useful, especially if asking
well-focused questions or, e.g., asked to ‘explain the following
<em>R</em> code’ to help understand code someone else has written. I
have almost always disagreed with the specific code ChatGPT generates;
sometimes it simply does not work (e.g., use the package ‘X’, but ‘X’ is
not a package), but more dangerous are the situations where code is
syntactically correct but provides the wrong answer. Use, but with
extreme care!</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="grading-for-this-week">Grading for this week<a class="anchor" aria-label="anchor" href="#grading-for-this-week"></a>
</h2>
<p>The task for this week is to write an <em>R</em> script that performs
data management and statistical analysis of a data set of your choice –
essentially reproducing selected steps in the work that we will do on
Wednesday.</p>
<p>You will provide me (on the CCR server) with a file ‘your_name.R’. I
will run the file in a new <em>R</em> session using the command
<code>source('your_name.R', echo = TRUE)</code>. This will read and
evaluate each <em>R</em> command in the file.</p>
<p>Grading will be out of 10, with the following thresholds</p>
<ul>
<li>7 / 10 if <code>source('your_name.R', echo = TRUE)</code> works
without error.</li>
<li>8 / 10 for scripts that implement more extensive analyses, or that
present interesting or complicated data.</li>
<li>up to 10 / 10 for work that goes beyond the material we cover this
week, e.g., using ‘Rmarkdown’ to present your work, performing
additional (and appropriate) data manipulation steps using dplyr or
other packages, additional visualizations or statstical analyses.</li>
</ul>
<p>Note that the 7 / 10 score could be obtained by copying &amp; pasting
(a subset of) the commands from Wednesday’s lab into ‘your_name.R’.
Please feel free to contact or speak with me if you have problems or
ideas.</p>
</div>
<div class="section level2">
<h2 class="unnumbered" id="session-information">Session information<a class="anchor" aria-label="anchor" href="#session-information"></a>
</h2>
<p>For reproducibility, I record the software versions used to create
this document</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## R version 4.3.2 (2023-10-31)</span></span>
<span><span class="co">## Platform: x86_64-pc-linux-gnu (64-bit)</span></span>
<span><span class="co">## Running under: Ubuntu 22.04.3 LTS</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Matrix products: default</span></span>
<span><span class="co">## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 </span></span>
<span><span class="co">## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## locale:</span></span>
<span><span class="co">##  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       </span></span>
<span><span class="co">##  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   </span></span>
<span><span class="co">##  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          </span></span>
<span><span class="co">## [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## time zone: UTC</span></span>
<span><span class="co">## tzcode source: system (glibc)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## attached base packages:</span></span>
<span><span class="co">## [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## other attached packages:</span></span>
<span><span class="co">## [1] ggplot2_3.4.4 dplyr_1.1.4  </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## loaded via a namespace (and not attached):</span></span>
<span><span class="co">##  [1] Matrix_1.6-1.1    gtable_0.3.4      jsonlite_1.8.8    compiler_4.3.2   </span></span>
<span><span class="co">##  [5] highr_0.10        tidyselect_1.2.0  stringr_1.5.1     jquerylib_0.1.4  </span></span>
<span><span class="co">##  [9] splines_4.3.2     scales_1.3.0      systemfonts_1.0.5 textshaping_0.3.7</span></span>
<span><span class="co">## [13] yaml_2.3.8        fastmap_1.1.1     lattice_0.21-9    R6_2.5.1         </span></span>
<span><span class="co">## [17] labeling_0.4.3    generics_0.1.3    knitr_1.45        tibble_3.2.1     </span></span>
<span><span class="co">## [21] desc_1.4.3        munsell_0.5.0     bslib_0.6.1       pillar_1.9.0     </span></span>
<span><span class="co">## [25] rlang_1.1.3       utf8_1.2.4        cachem_1.0.8      stringi_1.8.3    </span></span>
<span><span class="co">## [29] xfun_0.42         fs_1.6.3          sass_0.4.8        memoise_2.0.1    </span></span>
<span><span class="co">## [33] cli_3.6.2         mgcv_1.9-0        withr_3.0.0       pkgdown_2.0.7    </span></span>
<span><span class="co">## [37] magrittr_2.0.3    digest_0.6.34     grid_4.3.2        nlme_3.1-163     </span></span>
<span><span class="co">## [41] lifecycle_1.0.4   vctrs_0.6.5       evaluate_0.23     glue_1.7.0       </span></span>
<span><span class="co">## [45] farver_2.1.1      ragg_1.2.7        colorspace_2.1-0  fansi_1.0.6      </span></span>
<span><span class="co">## [49] rmarkdown_2.25    purrr_1.0.2       tools_4.3.2       pkgconfig_2.0.3  </span></span>
<span><span class="co">## [53] htmltools_0.5.7</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Martin Morgan.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
